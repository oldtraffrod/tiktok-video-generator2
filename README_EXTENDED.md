# TikTok動画生成ツール 使用方法ガイド（拡張版）

## 概要

TikTok動画生成ツールは、台本を入力するだけで、それに沿った画像や動画を自動的に組み合わせて1分程度のTikTok用動画を生成するツールです。このツールを使用することで、TikTokでバズる可能性のある魅力的な動画を簡単に作成することができます。

## 新機能

- **動画検索機能**: テキストに関連する動画素材を検索して使用できるようになりました
- **音声合成機能**: 台本テキストを自動的に音声に変換し、動画に追加できます
- **ハッシュタグ生成**: 動画内容に基づいて最適なハッシュタグを自動生成します
- **動画エフェクト**: 様々なエフェクト（モノクロ、セピア、ミラーなど）を適用できます

## 機能

- 台本入力と自動シーン分割
- キーワード抽出と画像・動画検索
- 画像・動画の選択と管理
- テキスト音声合成
- 動画エフェクト適用
- ハッシュタグ自動生成
- BGM追加
- 動画生成と出力

## インストール方法

```bash
# リポジトリをクローン
git clone https://github.com/yourusername/tiktok_video_generator.git
cd tiktok_video_generator

# 必要なライブラリをインストール
pip install -r requirements.txt

# アプリケーションを起動
streamlit run app.py
```

## APIキーの設定

画像・動画検索機能を使用するには、各サービスのAPIキーを設定する必要があります：

1. `.env.example`ファイルを`.env`にリネームします
2. 各サービスのAPIキーを取得し、`.env`ファイルに設定します：
   - Pixabay API: https://pixabay.com/api/docs/
   - Pexels API: https://www.pexels.com/api/
   - Unsplash API: https://unsplash.com/developers

## 使用方法

### 1. 台本入力

1. アプリケーションを起動すると、最初に台本入力画面が表示されます
2. テキストエリアに台本を入力します
   - 各シーンは空行で区切ってください
   - 1シーンは約5〜10秒を目安に作成してください
   - 全体で1分程度（6〜10シーン）が理想的です
3. サンプル台本ボタンをクリックすると、参考になる台本例が表示されます
4. 「台本を解析」ボタンをクリックして次のステップに進みます

### 2. メディア選択

1. 台本が解析されると、シーンごとにキーワードが抽出されます
2. 各シーンに対して、抽出されたキーワードをクリックすると関連画像または動画が検索されます
3. メディアタイプ（画像/動画）を選択できます
4. カスタムキーワードを入力して検索することもできます
5. 検索結果からメディアを選択すると、そのシーンに使用するメディアとして保存されます
6. 各シーンに少なくとも1つのメディアを選択する必要があります
7. すべてのシーンにメディアを選択したら「次へ進む」ボタンをクリックします

### 3. 音声設定

1. 各シーンのテキストを音声に変換するかどうかを選択できます
2. 音声言語を選択できます（日本語、英語、中国語など）
3. 音声の速度を調整できます（通常、遅い）
4. 「音声を生成」ボタンをクリックして音声を生成します
5. 生成された音声をプレビュー再生できます
6. 「次へ進む」ボタンをクリックして動画生成ステップに進みます

### 4. 動画生成

1. 選択したシーンとメディアの確認ができます
2. 動画生成オプションを設定できます：
   - シーンあたりの秒数：各シーンの表示時間を調整
   - タイトルスライド：動画の冒頭にタイトルスライドを追加するかどうか
   - エンディングスライド：動画の最後にエンディングスライドを追加するかどうか
   - BGM：動画に追加する背景音楽を選択（audioディレクトリにMP3ファイルを配置）
   - エフェクト：各シーンに適用するエフェクトを選択（なし、フェード、モノクロ、セピア、ミラーなど）
   - ハッシュタグ：動画内容に基づいて自動生成されたハッシュタグを編集できます
3. 「動画を生成」ボタンをクリックして動画を作成します

### 5. 動画出力

1. 生成された動画がプレビュー表示されます
2. 「動画をダウンロード」ボタンをクリックして動画をダウンロードできます
3. ダウンロードした動画はTikTokアプリにアップロードできます
4. 「動画設定を変更」ボタンをクリックすると、設定を変更して再生成できます
5. 「最初からやり直す」ボタンをクリックすると、新しい台本から始められます

## 新機能の詳細な使い方

### 動画検索機能

1. メディア選択画面で「動画を検索」ボタンをクリックします
2. キーワードを入力して検索します
3. 検索結果から使用したい動画を選択します
4. 選択した動画はシーンに追加され、画像と同様に使用できます

### 音声合成機能

1. 音声設定画面で各シーンの音声合成設定を行います
2. 言語を選択します（日本語がデフォルト）
3. 音声の速度を選択します（通常がデフォルト）
4. 「音声を生成」ボタンをクリックして音声を生成します
5. 生成された音声は動画生成時に自動的に各シーンに追加されます

### ハッシュタグ生成

1. 動画生成画面で「ハッシュタグを生成」ボタンをクリックします
2. 台本の内容に基づいて最適なハッシュタグが自動生成されます
3. 生成されたハッシュタグは編集可能です
4. ハッシュタグはエンディングスライドに表示されます

### 動画エフェクト

1. 動画生成画面で各シーンに適用するエフェクトを選択できます
2. 利用可能なエフェクト：
   - なし：エフェクトなし
   - フェード：フェードイン・フェードアウト
   - モノクロ：白黒エフェクト
   - セピア：セピアトーン
   - ミラーX：左右反転
   - ミラーY：上下反転
   - 明るく：明るさ増加
   - 暗く：明るさ減少

## TikTokでバズるためのヒント

- 最適な投稿時間を選びましょう（夕方〜夜が効果的です）
- トレンドのハッシュタグを活用しましょう
- キャッチーなキャプションを付けましょう
- コメントへの返信を積極的に行いましょう
- 定期的に投稿して、フォロワーを増やしましょう

## 効果的な台本の書き方

- 視聴者の興味を引く導入から始めましょう
- 簡潔で明確なメッセージを心がけてください
- 質問や呼びかけを入れると視聴者の関心を引きます
- 最後に明確なコールトゥアクション（行動喚起）を入れましょう
- 専門用語は避け、誰にでも理解できる言葉を使いましょう

## トラブルシューティング

- **画像・動画検索結果が表示されない場合**：別のキーワードで検索してみてください
- **動画生成に時間がかかる場合**：シーン数やメディア数を減らしてみてください
- **BGMや音声が再生されない場合**：ファイルが正しく配置されているか確認してください
- **エラーが発生した場合**：アプリケーションを再起動してみてください
- **Pixabayのインポートエラーが発生する場合**：requirements.txtを確認し、`pixabay_python==1.1.0`が正しくインストールされているか確認してください

## 技術情報

- 開発言語：Python
- フレームワーク：Streamlit
- 動画処理：MoviePy
- 画像・動画検索：Pixabay API, Pexels API, Unsplash API
- 音声合成：gTTS (Google Text-to-Speech)
- ハッシュタグ生成：カスタムアルゴリズム

## ライセンス

このツールは個人利用を目的としています。商用利用する場合は、各画像・動画提供サービスの利用規約を確認してください。
